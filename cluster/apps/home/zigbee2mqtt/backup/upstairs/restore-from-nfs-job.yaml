---
apiVersion: batch/v1
kind: Job
metadata:
  name: restore-zigbee2mqtt-data-upstairs-from-nfs
spec:
  template:
    spec:
      containers:
        - name: rsync
          image: ogivuk/rsync
          args:
            - -azP
            - /data/src/
            - /data/dest/
          env:
            - name: TZ
              value: Europe/Vienna
          volumeMounts:
            - mountPath: /data/src
              name: src
              readOnly: true
            - mountPath: /data/dest
              name: dest
      volumes:
        - name: dest
          persistentVolumeClaim:
            claimName: zigbee2mqtt-upstairs-data
        - name: src
          persistentVolumeClaim:
            claimName: zigbee2mqtt-upstairs-nfs-data
      restartPolicy: Never
  backoffLimit: 1
