---
prometheus:
  # ingress:
  #   enabled: true
  #   ingressClassName: traefik
  #   annotations:
  #     cert-manager.io/cluster-issuer: letsencrypt-production
  #     hajimari.io/enable: "true"
  #     hajimari.io/appName: prometheus
  #     hajimari.io/icon: chart-line-stacked
  #     traefik.ingress.kubernetes.io/router.entrypoints: websecure
  #   hosts:
  #     - prometheus.${SECRET_DOMAIN}
  #   tls:
  #     - secretName: prometheus-cert
  #       hosts:
  #         - prometheus.${SECRET_DOMAIN}
  prometheusSpec:
    resources:
      requests:
        memory: 4Gi
        cpu: 1000m
      limits:
        memory: 4Gi
        cpu: 4000m

    externalUrl: https://prometheus.${SECRET_DOMAIN}/
    ruleSelector: {}
    ruleNamespaceSelector: {}
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelector: {}
    serviceMonitorNamespaceSelector: {}
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelector: {}
    podMonitorNamespaceSelector: {}
    podMonitorSelectorNilUsesHelmValues: false
    retention: 2d
    enableAdminAPI: true
    walCompression: true

    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          resources:
            requests:
              storage: 20Gi

    additionalScrapeConfigs:
      - job_name: node-exporter
        honor_timestamps: true
        static_configs:
          - targets:
              - nas.${SECRET_DOMAIN}:9100
              - cubietruck.home:9100
              - opnsense.home:9100
      - job_name: esphome-switch-irpanel-1
        static_configs:
          - targets:
              - esphome-switch-irpanel-1.home
            labels:
              device: switch-irpanel-1
      - job_name: esphome-switch-irpanel-2
        static_configs:
          - targets:
              - esphome-switch-irpanel-2.home
            labels:
              device: switch-irpanel-2
      - job_name: esphome-switch-bedroom
        static_configs:
          - targets:
              - esphome-switch-bedroom.home
            labels:
              device: switch-bedroom
      - job_name: esphome-switch-domiroom
        static_configs:
          - targets:
              - esphome-switch-domiroom.home
            labels:
              device: switch-domiroom
      - job_name: esphome-switch-basement
        static_configs:
          - targets:
              - esphome-switch-basement.home
            labels:
              device: switch-basement
      - job_name: esphome-switch-alexroom
        static_configs:
          - targets:
              - esphome-switch-alexroom.home
            labels:
              device: switch-alexroom
      - job_name: esphome-switch-office
        static_configs:
          - targets:
              - esphome-switch-office.home
            labels:
              device: switch-office
      - job_name: esphome-switch-livingroom
        static_configs:
          - targets:
              - esphome-switch-livingroom.home
            labels:
              device: switch-livingroom
      - job_name: esphome-sensor-stairs
        static_configs:
          - targets:
              - esphome-sensor-stairs.home
            labels:
              device: sensor-stairs
      # - job_name: ohm-exporter
      #   scrape_interval: 15s
      #   static_configs:
      #   - targets:
      #     - red.home:4445
      #     - carbon.home:4445
      # - job_name: windows-exporter
      #   scrape_interval: 15s
      #   static_configs:
      #   - targets:
      #     - red.home:9182
